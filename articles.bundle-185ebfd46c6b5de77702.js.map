{"version":3,"sources":["webpack:///./node_modules/classnames/index.js","webpack:///./src/js/components/article-preview.js","webpack:///./src/js/components/pagination.js","webpack:///./src/js/pages/profile/articles/articles.js","webpack:///./src/js/pages/profile/articles/articles-controller.js"],"names":["hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","key","call","join","module","exports","default","ArticlePreview","Component","constructor","super","this","state","isFavoritePending","setFavorite","setState","props","articleController","article","then","render","className","favorited","onClick","disabled","favoritesCount","to","slug","title","description","propTypes","PropTypes","object","isRequired","Pagination","onPageClick","pageIndex","e","preventDefault","onChange","offset","itemsPerPage","totalItemsCount","pagesCount","Math","ceil","currentPageIndex","trunc","from","item","active","href","bind","number","func","Articles","setFollowing","controller","username","selectedTab","tabs","articles","pending","articlesOffset","articlesLimit","totalArticlesCount","getPageArticles","own","encodeURIComponent","favorite","map","has","Symbol","ctrl","routeFragment","parent","controllerObject","abstractPath","getArticles","getOwnArticles","getFavoriteArticles","articlesCount","articleData","Article","articleApi","author","limit"],"mappings":"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","file":"articles.bundle-185ebfd46c6b5de77702.js","sourcesContent":["/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {Link} from 'crizmas-router';\nimport classNames from 'classnames';\n\nimport ArticleAuthor from './article-author';\nimport TagList from './tag-list';\n\nexport default class ArticlePreview extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      isFavoritePending: false\n    };\n\n    this.setFavorite = () => {\n      this.setState({isFavoritePending: true});\n      this.props.articleController.setFavorite(this.props.article).then(() => {\n        this.setState({isFavoritePending: false});\n      });\n    };\n  }\n\n  render() {\n    const {article} = this.props;\n\n    return <div className=\"article-preview\">\n      <div className=\"article-meta\">\n        <ArticleAuthor article={article} />\n        <button\n          className={classNames('btn btn-sm pull-xs-right', {\n            'btn-primary': article.favorited,\n            'btn-outline-primary': !article.favorited\n          })}\n          onClick={this.setFavorite}\n          disabled={this.state.isFavoritePending}>\n          <i className=\"ion-heart\"></i> {article.favoritesCount}\n        </button>\n      </div>\n      <Link to={`/article/${article.slug}`} className=\"preview-link\">\n        <h1>{article.title}</h1>\n        <p>{article.description}</p>\n        <span>Read more...</span>\n        <TagList article={article} />\n      </Link>\n    </div>;\n  }\n}\n\nArticlePreview.propTypes = {\n  article: PropTypes.object.isRequired,\n  articleController: PropTypes.object.isRequired\n};\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nexport default class Pagination extends Component {\n  onPageClick(pageIndex, e) {\n    e.preventDefault();\n    this.props.onChange({offset: pageIndex * this.props.itemsPerPage});\n  }\n\n  render() {\n    const {totalItemsCount, offset, itemsPerPage} = this.props;\n    const pagesCount = Math.ceil(totalItemsCount / itemsPerPage);\n\n    if (pagesCount <= 1) {\n      return false;\n    }\n\n    const currentPageIndex = Math.trunc(offset / itemsPerPage);\n\n    return <nav>\n      <ul className=\"pagination\">\n        {Array.from({length: pagesCount}, (item, i) => <li\n          key={i}\n          className={classNames('page-item', {active: i === currentPageIndex})}>\n          <a\n            href=\"\"\n            className=\"page-link\"\n            onClick={this.onPageClick.bind(this, i)}>{i + 1}</a>\n        </li>)}\n      </ul>\n    </nav>;\n  }\n}\n\nPagination.propTypes = {\n  totalItemsCount: PropTypes.number.isRequired,\n  offset: PropTypes.number.isRequired,\n  itemsPerPage: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {Link} from 'crizmas-router';\nimport classNames from 'classnames';\n\nimport ArticlePreview from '../../../components/article-preview';\nimport Pagination from '../../../components/pagination';\n\nexport default class Articles extends Component {\n  constructor() {\n    super();\n\n    this.setFollowing = () => {\n      this.props.controller.setFollowing();\n    };\n  }\n\n  render() {\n    const {username, selectedTab, tabs, articles, pending, articleController,\n      articlesOffset, articlesLimit, totalArticlesCount, getPageArticles} = this.props.controller;\n\n    return <div className=\"container\">\n      <div className=\"row\">\n        <div className=\"col-xs-12 col-md-10 offset-md-1\">\n          <div className=\"articles-toggle\">\n            <ul className=\"nav nav-pills outline-active\">\n              <li className=\"nav-item\">\n                <Link\n                  className={classNames('nav-link', {active: selectedTab === tabs.own})}\n                  to={`/@${encodeURIComponent(username)}`}>My Articles</Link>\n              </li>\n              <li className=\"nav-item\">\n                <Link\n                  className={classNames('nav-link', {active: selectedTab === tabs.favorite})}\n                  to={`/@${encodeURIComponent(username)}/favorites`}>\n                  Favorited Articles\n                </Link>\n              </li>\n            </ul>\n          </div>\n\n          {articles && (articles.length\n            ? articles.map((article, i) => <ArticlePreview\n              key={i}\n              article={article}\n              articleController={articleController} />)\n            : <div className=\"article-preview\">No articles are here... yet.</div>)}\n\n          {pending.has('getArticles') && <div className=\"article-preview\">Loading articles...</div>}\n\n          <Pagination\n            totalItemsCount={totalArticlesCount}\n            offset={articlesOffset}\n            itemsPerPage={articlesLimit}\n            onChange={getPageArticles} />\n        </div>\n      </div>\n    </div>;\n  }\n}\n\nArticles.propTypes = {\n  controller: PropTypes.object.isRequired\n};\n","import {controller} from 'crizmas-mvc';\n\nimport * as articleApi from '../../../api/article';\nimport {Article} from '../../../models/article';\nimport articleController from '../../../controllers/article';\n\nconst tabs = {\n  own: Symbol(),\n  favorite: Symbol()\n};\n\nexport default controller(function ArticlesController() {\n  const ctrl = {\n    username: null,\n    articlesOffset: 0,\n    articlesLimit: 5,\n    totalArticlesCount: 0,\n    tabs,\n    selectedTab: tabs.own,\n    articles: null,\n    articleController\n  };\n\n  ctrl.onEnter = ({routeFragment}) => {\n    ctrl.username = routeFragment.parent.controllerObject.username;\n    ctrl.selectedTab = routeFragment.abstractPath === 'favorites'\n      ? tabs.favorite\n      : tabs.own;\n\n    ctrl.getArticles();\n  };\n\n  ctrl.getArticles = () => {\n    const getArticlesFunc = ctrl.selectedTab === tabs.own\n      ? getOwnArticles\n      : getFavoriteArticles;\n\n    return getArticlesFunc().then(({articles, articlesCount}) => {\n      ctrl.articles = articles.map((articleData) => new Article(articleData));\n      ctrl.totalArticlesCount = articlesCount;\n    });\n  };\n\n  const getOwnArticles = () => {\n    return articleApi.getOwnArticles({\n      author: ctrl.username,\n      offset: ctrl.articlesOffset,\n      limit: ctrl.articlesLimit\n    });\n  };\n\n  const getFavoriteArticles = () => {\n    return articleApi.getFavoriteArticles({\n      favorited: ctrl.username,\n      offset: ctrl.articlesOffset,\n      limit: ctrl.articlesLimit\n    });\n  };\n\n  ctrl.getPageArticles = ({offset}) => {\n    ctrl.articlesOffset = offset;\n\n    ctrl.getArticles();\n  };\n\n  return ctrl;\n});\n"],"sourceRoot":""}